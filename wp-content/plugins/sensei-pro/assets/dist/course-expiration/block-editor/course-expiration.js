(()=>{"use strict";var e={n:n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},d:(n,t)=>{for(var s in t)e.o(t,s)&&!e.o(n,s)&&Object.defineProperty(n,s,{enumerable:!0,get:t[s]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};const n=window.wp.plugins,t=window.wp.element,s=window.wp.editPost,r=window.wp.i18n,o=window.wp.components,a=window.wp.coreData,i=window.moment;var l=e.n(i);const c="expires-after",p="expires-on",_=(0,r.__)("Set Course Expiration Date","sensei-pro"),u=e=>{const[n,t]=(0,a.useEntityProp)("postType","course","meta");return[n[e],n=>t({[e]:n})]};(0,n.registerPlugin)("sensei-pro-course-expiration-plugin",{render:()=>{const[e,n]=u("_course_expiration_type"),[a,i]=(0,t.useState)(!1),[m,d]=u("_course_expiration_length"),[w,x]=u("_course_expires_on_date"),[h,v]=u("_course_expiration_period"),g=(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"sensei-wcpc-course-expiration__expires-after"},(0,t.createElement)(o.TextControl,{className:"sensei-wcpc-course-expiration__expiration-length",label:(0,r.__)("Expiration Length","sensei-pro"),hideLabelFromVision:!0,type:"number",step:1,min:1,value:m,onChange:e=>{const n=Math.max(1,parseInt(e.replace(/\D/g,"")||1,10));d(n)},onKeyPress:e=>{/\D/.test(e.key)&&e.preventDefault()}}),(0,t.createElement)(o.SelectControl,{label:(0,r.__)("Expiration Period","sensei-pro"),hideLabelFromVision:!0,value:h,options:[{label:(0,r.__)("Month(s)","sensei-pro"),value:"month"},{label:(0,r.__)("Week(s)","sensei-pro"),value:"week"},{label:(0,r.__)("Day(s)","sensei-pro"),value:"day"}],onChange:v})),"day"===h&&1===m&&(0,t.createElement)("small",{className:"sensei-wcpc-course-expiration__help-text"},(0,r.__)("The learner access will expire at midnight on the day of enrollment.","sensei-pro")));return(0,t.createElement)(s.PluginDocumentSettingPanel,{name:"sensei-wcpc-course-access-period",title:(0,r.__)("Access Period","sensei-pro"),className:"sensei-wcpc-course-expiration"},(0,t.createElement)("p",{className:"sensei-wcpc-course-expiration__intro"},(0,r.__)("Set how long learners will have access to this course.","sensei-pro")),(0,t.createElement)(o.SelectControl,{label:(0,r.__)("Course Access Ends","sensei-pro"),value:e,options:[{label:(0,r.__)("Never","sensei-pro"),value:"no-expiration"},{label:(0,r.__)("After a set period","sensei-pro"),value:c},{label:(0,r.__)("On a specific date","sensei-pro"),value:p}],onChange:n}),c===e&&g,p===e&&(0,t.createElement)("div",null,(0,t.createElement)(o.Button,{onClick:()=>{i(!0)},className:"datepicker","data-testid":"start-date-button"},w?(0,r.sprintf)(
/* translators: %s is replaced with start date string in format YYYY-MM-DD */
(0,r.__)("Expires on %s","sensei-pro"),(E=w,l()(E).format(l().HTML5_FMT.DATE))):_),a&&(0,t.createElement)(o.DatePicker,{currentDate:w,onChange:e=>{x(e),i(!1)}})));var E},icon:null})})();