(()=>{var e={4184:(e,t)=>{var s;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var r=typeof s;if("string"===r||"number"===r)e.push(s);else if(Array.isArray(s)){if(s.length){var i=o.apply(null,s);i&&e.push(i)}}else if("object"===r)if(s.toString===Object.prototype.toString)for(var a in s)n.call(s,a)&&s[a]&&e.push(a);else e.push(s.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(s=function(){return o}.apply(t,[]))||(e.exports=s)}()}},t={};function s(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.element,t=window.wp.blocks,n=window.wp.plugins,o=window.wp.editPost,r=window.wp.components,i=window.wp.i18n,a=window.wp.data,l=window.wp.coreData,c=window.wp.editor,u=e=>{const t=(0,a.useSelect)((e=>e(c.store).getCurrentPostType()),[]),[s,n]=(0,l.useEntityProp)("postType",t,"meta");return[s[e],t=>n({...s,[e]:t})]},{showcaseEditor:p}=window.sensei,d=[{label:(0,i.__)("Select a category","sensei-pro"),value:"",disabled:!0},...p.categoryOptions],m=p.languageOptions,g=p.siteLanguage,w=p.studentsNumber,h=()=>{const[t,s]=u("_is_paid"),[n,l]=u("_category"),[c,p]=u("_language");return(0,e.useEffect)((()=>{(e=>{const t=`${e}_first-load`;window.localStorage.getItem(t)||(0,a.select)("core/edit-post").isEditorPanelOpened(e)||((0,a.dispatch)("core/edit-post").toggleEditorPanelOpened(e),window.localStorage.setItem(t,!0))})("sensei-pro-showcase-plugin/sensei-pro-showcase-settings")}),[]),(0,e.createElement)(o.PluginDocumentSettingPanel,{name:"sensei-pro-showcase-settings",title:(0,i.__)("Settings","sensei-pro"),className:"sensei-pro-showcase-settings"},(0,e.createElement)(r.ToggleControl,{checked:t,onChange:s,label:(0,i.__)("List course as Paid","sensei-pro"),help:(0,i.__)("Set if you want the course to be listed on Sensei's Showcase as Free or Paid.","sensei-pro")}),(0,e.createElement)(r.SelectControl,{label:(0,i.__)("Category","sensei-pro"),value:n,options:d,onChange:l}),(0,e.createElement)(r.SelectControl,{label:(0,i.__)("Language","sensei-pro"),value:c||g,options:m,onChange:p}))},_=window.React;function f(e){return e.startsWith("{{/")?{type:"componentClose",value:e.replace(/\W/g,"")}:e.endsWith("/}}")?{type:"componentSelfClosing",value:e.replace(/\W/g,"")}:e.startsWith("{{")?{type:"componentOpen",value:e.replace(/\W/g,"")}:{type:"string",value:e}}function E(e,t){let s,n,o=[];for(let r=0;r<e.length;r++){const i=e[r];if("string"!==i.type){if(void 0===t[i.value])throw new Error(`Invalid interpolation, missing component node: \`${i.value}\``);if("object"!=typeof t[i.value])throw new Error(`Invalid interpolation, component node must be a ReactElement or null: \`${i.value}\``);if("componentClose"===i.type)throw new Error(`Missing opening component token: \`${i.value}\``);if("componentOpen"===i.type){s=t[i.value],n=r;break}o.push(t[i.value])}else o.push(i.value)}if(s){const r=function(e,t){const s=t[e];let n=0;for(let o=e+1;o<t.length;o++){const e=t[o];if(e.value===s.value){if("componentOpen"===e.type){n++;continue}if("componentClose"===e.type){if(0===n)return o;n--}}}throw new Error("Missing closing component token `"+s.value+"`")}(n,e),i=E(e.slice(n+1,r),t),a=(0,_.cloneElement)(s,{},i);if(o.push(a),r<e.length-1){const s=E(e.slice(r+1),t);o=o.concat(s)}}return o=o.filter(Boolean),0===o.length?null:1===o.length?o[0]:(0,_.createElement)(_.Fragment,null,...o)}function v(e){const{mixedString:t,components:s,throwErrors:n}=e;if(!s)return t;if("object"!=typeof s){if(n)throw new Error(`Interpolation Error: unable to process \`${t}\` because components is not an object`);return t}const o=function(e){return e.split(/(\{\{\/?\s*\w+\s*\/?\}\})/g).map(f)}(t);try{return E(o,s)}catch(e){if(n)throw new Error(`Interpolation Error: unable to process \`${t}\` because of error \`${e.message}\``);return t}}var b=s(4184),y=s.n(b);const S=window.wp.blockEditor,N=window.wp.htmlEntities,P=t=>{let{siteTitle:s,siteLogo:n}=t;return(0,e.createElement)("div",{className:"sensei-showcase-card__site"},n&&(0,e.createElement)("div",{role:"img","aria-label":(0,i.__)("Site logo","sensei-pro"),className:"sensei-showcase-card__site-icon",style:{backgroundImage:`url(${n})`}}),s&&(0,e.createElement)("div",{className:"sensei-showcase-card__site-name"},s))},C=["image"],k=()=>{const[e={},t]=u("_media");return{media:e,onSelectMedia:e=>{t({id:e.id,src:e.url})}}},x=()=>{const{media:t,onSelectMedia:s}=k();return(0,e.createElement)(S.BlockControls,{group:"other"},(0,e.createElement)(S.MediaReplaceFlow,{mediaId:t.id,mediaURL:t.src,allowedTypes:C,accept:"image/*",onSelect:s,name:t.src?(0,i.__)("Replace Image","sensei-pro"):(0,i.__)("Add Image","sensei-pro")}))},O=()=>{const{media:t,onSelectMedia:s}=k();return t.src?(0,e.createElement)("div",{role:"img","aria-label":(0,i.__)("Showcase illustration","sensei-pro"),className:"sensei-showcase-card__image",style:{backgroundImage:`url(${t.src})`}}):(0,e.createElement)(S.MediaPlaceholder,{onSelect:s,allowedTypes:["image"],multiple:!1,value:t,labels:{title:(0,i.__)("Select a course image","sensei-pro")}})};function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},I.apply(this,arguments)}const T=t=>{let{focusClassName:s,...n}=t;const[o,r]=(0,e.useState)(!1),i=()=>{r(!0)};return(0,e.createElement)(S.RichText,I({},n,{className:y()(n.className,{[s]:o}),onFocus:i,unstableOnFocus:i,onBlur:()=>{r(!1)},allowedFormats:[]}))},M=()=>(0,e.createElement)(x,null),R=window.wp.notices,j="course-showcase-save-error",L=()=>{const[t]=u("_senseilmscom_error"),[s]=u("_senseilmscom_submitted"),n=(t=>{const s=(0,e.useRef)();return(0,e.useEffect)((()=>{s.current=t}),[t]),s.current})(s),{createErrorNotice:o,removeNotice:r}=(0,a.useDispatch)(R.store);(0,e.useEffect)((()=>{if(""===t)return r(j),void(!1===n&&n!==s&&window.sensei?.showcaseEditor?.redirectUrl&&(window.location.href=window.sensei.showcaseEditor.redirectUrl));const e=(0,i.sprintf)(
/* translators: Error message. */
(0,i.__)("Course Showcase could not be updated. %s","sensei-pro"),t);o(e,{id:j,isDismissible:!1})}),[r,o,t,n,s])},F=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"sensei-pro/showcase","title":"Showcase","description":"Course details to be listed in senseilms.com.","supports":{"html":false,"inserter":false,"reusable":false},"textdomain":"sensei-pro"}');(0,t.registerBlockType)(F,{edit:()=>{const t=(0,S.useBlockProps)({className:"test"}),{siteTitle:s,siteLogo:n,isRequestingMediaItem:o}=(0,a.useSelect)((e=>{const{canUser:t,getEntityRecord:s,getEditedEntityRecord:n}=e(l.store),o=t("update","settings"),r=n("root","site"),i=s("root","__unstableBase"),a=o?r?.title:i?.title,c=o?r?.site_logo:i?.site_logo,u=c&&e(l.store).getMedia(c,{context:"view"}),p=c&&!e(l.store).hasFinishedResolution("getMedia",[c,{context:"view"}]);return{siteTitle:(0,N.decodeEntities)(a),siteLogo:u?.source_url,isRequestingMediaItem:p}}),[]),[c]=u("_is_paid"),[p,m]=u("_title"),[g,h]=u("_excerpt"),[_]=u("_category");L();const f=_&&d.find((e=>e.value===_)).label;let E=(0,e.createElement)("div",{className:"sensei-showcase-card"},(0,e.createElement)(O,null),(0,e.createElement)("div",{className:"sensei-showcase-card__body"},(0,e.createElement)("div",{className:"sensei-showcase-card__badges"},f&&(0,e.createElement)("div",{className:"sensei-showcase-card__badge sensei-showcase-card__badge--category"},f),(0,e.createElement)("div",{className:y()("sensei-showcase-card__badge",{"sensei-showcase-card__badge--paid":c,"sensei-showcase-card__badge--free":!c})},c?(0,i.__)("Paid","sensei-pro"):(0,i.__)("Free","sensei-pro"))),(0,e.createElement)(T,{className:"sensei-showcase-card__title",focusClassName:"sensei-showcase-card__title--focus",onChange:m,value:p,placeholder:(0,i.__)("Course title","sensei-pro"),disableLineBreaks:!0}),(s||n)&&(0,e.createElement)(P,{siteTitle:s,siteLogo:n}),(0,e.createElement)(T,{className:"sensei-showcase-card__excerpt",focusClassName:"sensei-showcase-card__excerpt--focus",onChange:h,value:g,placeholder:(0,i.__)("Course excerpt","sensei-pro"),disableLineBreaks:!0}),(0,e.createElement)("div",{className:"sensei-showcase-card__students"},(0,i.sprintf)(
/* translators: %s: Expression with the approximate number of students */
(0,i.__)("%s Students","sensei-pro"),w))));return o&&(E=(0,e.createElement)("div",{className:"sensei-showcase-loading"},(0,e.createElement)(r.Spinner,null))),(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",t,E),(0,e.createElement)(M,null))}}),(0,n.registerPlugin)("sensei-pro-showcase-plugin",{render:()=>(0,e.createElement)(h,null),icon:null}),(0,n.registerPlugin)("sensei-pro-showcase-tos-pre-publish-panel",{render:()=>{const t=(0,e.createElement)("p",null,(0,e.createInterpolateElement)((0,i.__)("To submit your course listing to the Sensei Showcase, click on the <strong>Submit for Review</strong> button above. The Sensei team will review your submission in the next few days.","sensei-pro"),{strong:(0,e.createElement)("strong",null)})),s=(0,e.createElement)(r.Notice,{isDismissible:!1,status:"warning",className:"sensei-pro-showcase-terms-conditions__notice"},v({mixedString:(0,i.__)("By submitting this course to the Sensei Showcase you agree to the {{link}}SenseiLMS.com Terms & Conditions{{/link}}.","sensei-pro"),components:{link:(0,e.createElement)(r.ExternalLink,{href:"https://senseilms.com/terms/"})}}));return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.PluginPrePublishPanel,null,t,s),(0,e.createElement)(o.PluginPostStatusInfo,null,s))}})})()})();