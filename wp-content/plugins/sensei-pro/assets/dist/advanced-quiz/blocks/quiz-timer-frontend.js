(()=>{var e={4184:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)){if(r.length){var o=s.apply(null,r);o&&e.push(o)}}else if("object"===i)if(r.toString===Object.prototype.toString)for(var c in r)n.call(r,c)&&r[c]&&e.push(c);else e.push(r.toString())}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(r=function(){return s}.apply(t,[]))||(e.exports=r)}()}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.element,t=window.wp.domReady;var n=r.n(t);const s=window.ReactDOM;function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}var o=r(4184),c=r.n(o);const a=window.wp.i18n,l=(0,e.forwardRef)(((t,r)=>{let{seconds:n,triggerOnRender:s,deadline:i,isCourseTheme:o,isSmall:l=!0,isSticky:u=!1,isHidden:m=!1,style:d={},showTextOnlyTimer:_=!1}=t,f=106;l&&(f=81);const p=1e3*n,h=f/2,w=(f-4)*Math.PI,[y,v]=(0,e.useState)(i-Date.now()),[g,q]=(0,e.useState)(!1);(0,e.useEffect)((()=>{v(i-Date.now())}),[i]),(0,e.useEffect)((()=>{if(!s||y<=0)return;q(!0);const e=setTimeout((()=>{v(i-Date.now()),y<=0&&(clearTimeout(e),v(p))}),10)}),[y]);const E={height:f,width:f},z={color:"black",fontSize:.2*f,fontFamily:"sans-serif"},S=e=>{e<1&&(e=0);let t=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60),n=Math.floor(e/36e5%24);return n=n<10?"0"+n:n,r=r<10?"0"+r:r,t=t<10?"0"+t:t,("00"===n?"":n+":")+r+":"+t};return _?(0,e.createElement)("div",{className:c()("sensei-lms-quiz-timer__countdown-text--sticky","sensei-course-theme__main-content")},(0,e.createElement)("div",{className:"sensei-lms-quiz-timer__countdown-text--inner-container"},(0,e.createElement)("span",{className:"sensei-lms-quiz-timer__countdown-text--label"},(0,a.__)("Time left","sensei-pro")),(0,e.createElement)("span",{className:"sensei-lms-quiz-timer__countdown-text--time"},S(y)))):(0,e.createElement)("div",{ref:r,className:c()({"sensei-lms-quiz-timer__countdown-circular":!0,"sensei-lms-quiz-timer__countdown-circular--sticky":!_&&u,"sensei-lms-quiz-timer__countdown-circular--hidden":m,"sensei-lms-quiz-timer-course-theme":o}),style:d},(0,e.createElement)("div",{className:"sensei-lms-quiz-timer__countdown-circular__circle-container",style:E},(0,e.createElement)("div",{style:z},S(y)),(0,e.createElement)("svg",null,(0,e.createElement)("circle",{style:{r:h-2,cx:h,cy:h,strokeWidth:4,fill:"transparent",strokeOpacity:.2}}),(0,e.createElement)("circle",{style:{strokeDasharray:w,strokeDashoffset:g||!g&&y>0?w-y/p*w:w,r:h-2,cx:h,cy:h,strokeWidth:4,fill:"transparent"}}))))})),u=t=>{let{time:r,isPreviewMode:n=!1,isCourseTheme:s,...o}=t;const[c,a]=(0,e.useState)(!1),[u,m]=(0,e.useState)(0),[d,_]=(0,e.useState)(!0),f=(0,e.useRef)(null),p=(0,e.useCallback)((()=>{const e=document.querySelector("html");_(e&&e.clientWidth<=782);const t=document?.querySelector("#wpadminbar,.sensei-course-theme__header");if(!t)return;if("fixed"!==getComputedStyle(t).getPropertyValue("position"))return void m(0);const{bottom:r}=t?.getBoundingClientRect()||{bottom:0};m(r)}),[m]),h=(0,e.useCallback)((()=>{if(!f.current)return;const{top:e,bottom:t}=f.current.getBoundingClientRect()||{};a(t-(t-e)/2<=u)}),[a,u]);(0,e.useEffect)((()=>(document.addEventListener("scroll",h),window.addEventListener("resize",p),p(),()=>{document.removeEventListener("scroll",h),window.removeEventListener("resize",p)})),[h,p]);const w=(d||c)&&s;return(0,e.useEffect)((()=>{const e=document.querySelector("main.sensei-course-theme__main-content");w?e.classList.add("sensei-course-theme__main-content--sticky-quiz-timer"):e&&e.classList.remove("sensei-course-theme__main-content--sticky-quiz-timer")}),[w]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l,i({seconds:r,triggerOnRender:n,isHidden:c||w,isSmall:d,ref:f,isCourseTheme:s},o)),!s&&(0,e.createElement)(l,i({seconds:r,triggerOnRender:n,isSticky:!0,isHidden:!c,isSmall:d,style:{top:`${u+20}px`,right:"20px"}},o)),s&&w&&(0,e.createElement)(l,i({seconds:r,triggerOnRender:n,isSmall:d,isCourseTheme:s,showTextOnlyTimer:!0},o)))};n()((()=>{const t=parseInt(window.sensei_quiz_timer_params.time_left,10),r=()=>{document.querySelector('button[name="quiz_complete"]')?.click()},n=document.getElementById("sensei-quiz-timer");if(window.sensei_quiz_timer_params.is_course_theme){const e=document.querySelector(".sensei-course-theme__quiz__header__right");e&&(n.remove(),e.append(n),e.classList.add("sensei-course-theme__quiz__header__right--with-timer"))}if(n){let i=0;t&&(i=1e3*t+Date.now(),setTimeout(r,1e3*t)),(0,s.render)((0,e.createElement)(u,{time:window.sensei_quiz_timer_params.time,deadline:i,isPreviewMode:!window.sensei_quiz_timer_params.is_not_started,isCourseTheme:window.sensei_quiz_timer_params.is_course_theme}),n)}}))})()})();