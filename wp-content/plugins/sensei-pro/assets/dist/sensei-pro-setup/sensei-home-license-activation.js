(()=>{"use strict";var e={n:n=>{var s=n&&n.__esModule?()=>n.default:()=>n;return e.d(s,{a:s}),s},d:(n,s)=>{for(var i in s)e.o(s,i)&&!e.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:s[i]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};const n=window.wp.element,s=window.wp.hooks,i=window.wp.i18n,t=window.wp.apiFetch;var o=e.n(t);const a=window.wp.components,c=function({icon:e,size:s=24,...i}){return(0,n.cloneElement)(e,{width:s,height:s,...i})},l=window.wp.primitives,r=(0,n.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(l.Path,{d:"M18.3 5.6L9.9 16.9l-4.6-3.4-.9 1.2 5.8 4.3 9.3-12.6z"})),u=e=>{let{currentLicenseKey:s,successActivation:t,reset:c}=e;const[l,r]=(0,n.useState)(null),[u,m]=(0,n.useState)(null),[p,v]=(0,n.useState)(!1),{deactivateNonce:d,pluginSlug:_,isLicenseActivated:w}=window.senseiHomeLicenseActivation;return(0,n.useEffect)((()=>{t&&(r(null),m(null))}),[t]),u&&!1!==l?(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation__message"},p?(0,n.createElement)(a.Spinner,null):null,u):d&&(w||t)?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(a.Button,{onClick:e=>{e.preventDefault(),v(!0),r(null),m((0,i.__)("Deactivating licenseâ€¦","sensei-pro")),o()({path:"/sensei-pro-internal/v1/sensei-pro-setup/deactivate-license",method:"POST",data:{license_key:s,plugin_slug:_,nonce:d}}).then((e=>{v(!1),e.success?(r(!0),m((0,i.__)("License deactivated successfully.","sensei-pro")),c()):(r(!1),m(e.message))})).catch((()=>{v(!1),r(!1),m((0,i.__)("Error while deactivating license","sensei-pro"))}))},variant:"secondary",disabled:p},(0,i.__)("Deactivate License","sensei-pro")),u?(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation__error"},u):null):null},m=e=>{let{isMultisite:s}=e;const[t,l]=(0,n.useState)(!1),[m,p]=(0,n.useState)(null),[v,d]=(0,n.useState)(null),[_,w]=(0,n.useState)(window.senseiHomeLicenseActivation.licenseKey),[h,g]=(0,n.useState)(window.senseiHomeLicenseActivation.isLicenseActivated),E="sensei-pro"===window.senseiHomeLicenseActivation.pluginSlug?(0,i.__)("Sensei Pro","sensei-pro"):(0,i.__)("Sensei Blocks","sensei-pro"),{domain:f,forceShowLicense:L}=window.senseiHomeLicenseActivation,S=(0,n.useMemo)((()=>{let e=(0,i.sprintf)(
/* translators: %s: Name of the plugin that has been activated */
(0,i.__)("%s successfully activated","sensei-pro"),E);return m||(e=(0,i.sprintf)(
/* translators: %s: Name of the plugin to be activated */
(0,i.__)("Activate %s","sensei-pro"),E)),L&&h&&(e=(0,i.sprintf)(
/* translators: %s: Name of the plugin to be activated */
(0,i.__)("%s License Information","sensei-pro"),E)),e}),[E,m,L,h]);return(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation"},(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation__title"},(m||h)&&(0,n.createElement)(c,{icon:r}),S),(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation__content"},(0,i.__)("You can find your key by logging in to your SenseiLMS.com account","sensei-pro")," ",(0,n.createElement)(a.ExternalLink,{href:"https://senseilms.com/my-account/"},(0,i.__)("here","sensei-pro")),"."),(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation__content"},s&&(0,n.createInterpolateElement)((0,i.sprintf)(// translators: %s: Name of the plugin being activated.
(0,i.__)("<strong>Multisite Network</strong>: Main site's domain (%s) will be used for activation and the license will be valid for all the sites on the network.","sensei-pro"),f),{strong:(0,n.createElement)("strong",null)})),(!m||L)&&(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation__form"},(0,n.createElement)("input",{className:"sensei-pro-sensei-home-license-activation__form-input",value:_,placeholder:(0,i.__)("Enter your license key","sensei-pro"),onChange:e=>w(e.target.value),readOnly:h}),h?null:(0,n.createElement)(a.Button,{className:"sensei-pro-sensei-home-license-activation__form-button",onClick:()=>{l(!0),o()({path:"/sensei-pro-internal/v1/sensei-pro-setup/activate-license",method:"POST",data:{license_key:_,plugin_slug:window.senseiHomeLicenseActivation.pluginSlug}}).then((e=>{l(!1),e.success?(p(!0),g(!0),d(null)):(p(!1),d(e.message))})).catch((()=>{l(!1),p(!1),d((0,i.__)("Error while activating license","sensei-pro"))}))},disabled:t,variant:"primary"},t?(0,n.createElement)(a.Spinner,null):(0,i.__)("Activate","sensei-pro"))),v&&(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation__error"},v),(0,n.createElement)(u,{currentLicenseKey:_,successActivation:m,reset:()=>{w(""),p(null),d(null),g(!1)}}))};(0,s.addFilter)("sensei.home.top","sensei-pro",(()=>{const e=window.senseiHomeLicenseActivation?.isLicenseActivated,s=window.senseiHomeLicenseActivation?.forceShowLicense,i=!0===window.senseiHomeLicenseActivation?.isMultisite;return e&&!s?null:(0,n.createElement)(m,{isMultisite:i})}))})();