(()=>{"use strict";var e={n:n=>{var s=n&&n.__esModule?()=>n.default:()=>n;return e.d(s,{a:s}),s},d:(n,s)=>{for(var i in s)e.o(s,i)&&!e.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:s[i]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};const n=window.wp.element,s=window.wp.hooks,i=window.wp.i18n,t=window.wp.components,o=function({icon:e,size:s=24,...i}){return(0,n.cloneElement)(e,{width:s,height:s,...i})},c=window.wp.primitives,a=(0,n.createElement)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(c.Path,{d:"M18.3 5.6L9.9 16.9l-4.6-3.4-.9 1.2 5.8 4.3 9.3-12.6z"})),l=window.wp.apiFetch;var r=e.n(l);const m=e=>{let{currentLicenseKey:s,successActivation:o,reset:c}=e;const[a,l]=(0,n.useState)(null),[m,u]=(0,n.useState)(null),[p,v]=(0,n.useState)(!1),{formNonce:d,pluginSlug:_,isLicenseActivated:w}=window.senseiHomeLicenseActivation;return(0,n.useEffect)((()=>{o&&(l(null),u(null))}),[o]),m&&!1!==a?(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation__message"},p?(0,n.createElement)(t.Spinner,null):null,m):d&&(w||o)?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(t.Button,{onClick:e=>{e.preventDefault(),v(!0),l(null),u((0,i.__)("Deactivating licenseâ€¦","sensei-pro")),r()({path:"/sensei-pro-internal/v1/sensei-pro-setup/deactivate-license",method:"POST",data:{license_key:s,plugin_slug:_,nonce:d}}).then((e=>{v(!1),e.success?(l(!0),u((0,i.__)("License deactivated successfully.","sensei-pro")),c()):(l(!1),u(e.message))})).catch((()=>{v(!1),l(!1),u((0,i.__)("Error while deactivating license","sensei-pro"))}))},variant:"secondary",disabled:p},(0,i.__)("Deactivate License","sensei-pro")),m?(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation__error"},m):null):null},u=()=>{const[e,s]=(0,n.useState)(!1),[t,o]=(0,n.useState)(null),[c,a]=(0,n.useState)(null),[l,m]=(0,n.useState)(window.senseiHomeLicenseActivation.isLicenseActivated);return{submit:(e,n)=>{s(!0),r()({path:e,method:"POST",data:n}).then((e=>{s(!1),e.success?(o(!0),m(!0),a(null)):(o(!1),a(e.message))})).catch((()=>{s(!1),o(!1),a((0,i.__)("Error while activating license","sensei-pro"))}))},reset:()=>{o(null),a(null),m(!1)},isFetching:e,success:t,errorMessage:c,isActivated:l}},p=e=>{let{isMultisite:s}=e;const{submit:c,reset:l,isFetching:r,success:p,errorMessage:v,isActivated:d}=u(),[_,w]=(0,n.useState)(window.senseiHomeLicenseActivation.licenseKey),h="sensei-pro"===window.senseiHomeLicenseActivation.pluginSlug?(0,i.__)("Sensei Pro","sensei-pro"):(0,i.__)("Sensei Blocks","sensei-pro"),{domain:g,forceShowLicense:E}=window.senseiHomeLicenseActivation,f=(0,n.useMemo)((()=>{let e=(0,i.sprintf)(
/* translators: %s: Name of the plugin that has been activated */
/* translators: %s: Name of the plugin that has been activated */
(0,i.__)("%s successfully activated!","sensei-pro"),h);return p||(e=(0,i.sprintf)(
/* translators: %s: Name of the plugin to be activated */
/* translators: %s: Name of the plugin to be activated */
(0,i.__)("Activate %s","sensei-pro"),h)),E&&d&&(e=(0,i.sprintf)(
/* translators: %s: Name of the plugin to be activated */
/* translators: %s: Name of the plugin to be activated */
(0,i.__)("%s License Information","sensei-pro"),h)),e}),[h,p,E,d]);return(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation__title"},(p||d)&&(0,n.createElement)(o,{icon:a}),f),(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation__content"},(0,i.__)("You can find your key by logging in to your SenseiLMS.com account","sensei-pro")," ",(0,n.createElement)(t.ExternalLink,{href:"https://senseilms.com/my-account/"},(0,i.__)("here","sensei-pro")),"."),(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation__content"},s&&(0,n.createInterpolateElement)((0,i.sprintf)(// translators: %s: Name of the plugin being activated.
// translators: %s: Name of the plugin being activated.
(0,i.__)("<strong>Multisite Network</strong>: Main site's domain (%s) will be used for activation and the license will be valid for all the sites on the network.","sensei-pro"),g),{strong:(0,n.createElement)("strong",null)})),(!p||E)&&(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation__form"},(0,n.createElement)("input",{className:"sensei-pro-sensei-home-license-activation__form-input",value:_,placeholder:(0,i.__)("Enter your license key","sensei-pro"),onChange:e=>w(e.target.value),readOnly:d}),d?null:(0,n.createElement)(t.Button,{className:"sensei-pro-sensei-home-license-activation__form-button",onClick:()=>{c("/sensei-pro-internal/v1/sensei-pro-setup/activate-license",{license_key:_,plugin_slug:window.senseiHomeLicenseActivation.pluginSlug,nonce:window.senseiHomeLicenseActivation.formNonce})},disabled:r,variant:"primary"},r?(0,n.createElement)(t.Spinner,null):(0,i.__)("Activate","sensei-pro"))),v&&(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation__error"},v),(0,n.createElement)(m,{currentLicenseKey:_,successActivation:p,reset:()=>{w(""),l()}}))},v=()=>{const{submit:e,isFetching:s,success:o,errorMessage:c}=u(),a="sensei-pro"===window.senseiHomeLicenseActivation.pluginSlug?(0,i.__)("Sensei Pro","sensei-pro"):(0,i.__)("Sensei Blocks","sensei-pro");return o?(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation__title"},(0,i.sprintf)(
/* translators: %s: Name of the plugin that has been activated */
/* translators: %s: Name of the plugin that has been activated */
(0,i.__)("%s successfully activated!","sensei-pro"),a)):(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation__title"},(0,i.sprintf)(
/* translators: %s: Name of the plugin */
/* translators: %s: Name of the plugin */
(0,i.__)("Activate %s","sensei-pro"),a)),(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation__content"},(0,i.sprintf)(
/* translators: %s: Name of the plugin */
/* translators: %s: Name of the plugin */
(0,i.__)("Your %s license is not activated. Click on the following button to activate it now.","sensei-pro"),a)),c&&(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation__error"},c),(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation__form"},(0,n.createElement)(t.Button,{onClick:()=>{e("/sensei-pro-internal/v1/sensei-pro-setup/flush-wpcom-license",{plugin_slug:window.senseiHomeLicenseActivation.pluginSlug,nonce:window.senseiHomeLicenseActivation.formNonce})},disabled:s,variant:"primary"},s?(0,n.createElement)(t.Spinner,null):(0,i.__)("Activate","sensei-pro"))))},d=()=>{var e,s,i;const t=null===(e=window.senseiHomeLicenseActivation)||void 0===e?void 0:e.isLicenseActivated,o=null===(s=window.senseiHomeLicenseActivation)||void 0===s?void 0:s.forceShowLicense,c=!0===(null===(i=window.senseiHomeLicenseActivation)||void 0===i?void 0:i.isMultisite),a=!0===window.senseiHomeLicenseActivation.hasWpcomSubscription;return t&&!o||t&&a?null:(0,n.createElement)("div",{className:"sensei-pro-sensei-home-license-activation"},a?(0,n.createElement)(v,null):(0,n.createElement)(p,{isMultisite:c}))};(0,s.addFilter)("sensei.home.top","sensei-pro",(()=>(0,n.createElement)(d,null)))})();