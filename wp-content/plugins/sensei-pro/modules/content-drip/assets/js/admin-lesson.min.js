!function(t,i,e){t(".dripTypeOptions #datepicker").datepicker();var n=e.View.extend({el:"#content-drip-lesson .inside",events:{"change .sdc-lesson-drip-type":"dripTypeChange","click .send_test_email":"sendTestEmail"},initialize:function(){this.$lessonDatePicker=this.$("#scd-lesson-datepicker"),this.setInitialDripType(),this.takeControl(),this.render(),this.$lessonDatePicker.datepicker({dateFormat:"yy-mm-dd"})},setInitialDripType:function(){var e=this.$("select.sdc-lesson-drip-type").val();return i.isEmpty(e)?this.dripType="none":this.dripType=e,this},takeControl:function(){this.$el.find(".dripTypeOptions").each(function(e,i){t(i).hasClass("hidden")&&t(i).hide().removeClass("hidden")})},render:function(e){this.$el.find(".dripTypeOptions").hide(),"none"!==this.dripType&&("dynamic"===this.dripType&&(hasPre=this.$("select.sdc-lesson-drip-type option.dynamic").data("has-pre"),"false"===hasPre.toString().trim()&&this.$(".pre-requisite-notice").show()),this.$el.find(".dripTypeOptions."+this.dripType).show())},dripTypeChange:function(e){"change"===e.type&&"sdc-lesson-drip-type"===e.target.className&&(this.dripType=e.target.value,this.render())},sendTestEmail:function(e){var i={action:"send_test_email",nonce:scdManualDrip.nonce,userId:jQuery("#user-id").val(),lessonId:jQuery("#post_ID").val()};jQuery.post(ajaxurl,i,function(e){scdManualDrip.nonce=e.data.newNonce,alert(e.data.notice)})}});window.dripMetaBox=new n}(jQuery,_,Backbone);